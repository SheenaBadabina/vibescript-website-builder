<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Sign In — VibeScript Builder</title>
<link rel="stylesheet" href="/styles.css"/>
<style>
  :root { color-scheme: dark; }
  body{background:#0b1020;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
  .wrap{min-height:100dvh;display:flex;align-items:center;justify-content:center;padding:16px}
  .card{width:min(92vw,460px);background:linear-gradient(180deg,rgba(15,23,42,.6),rgba(2,6,23,.7));
        border:1px solid rgba(255,255,255,.08);backdrop-filter:blur(8px);border-radius:20px;padding:22px}
  h1{margin:0 0 6px;font-size:26px;color:#fff;font-weight:800;text-align:center}
  p.muted{margin:0 0 16px;color:#9ca3af;text-align:center}
  label{display:block;font-size:12px;color:#9ca3af;margin:10px 0 6px}
  input{width:100%;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);
        color:#fff;padding:.65rem .8rem;font-size:.95rem}
  input:focus{outline:none;border-color:#2dd4bf;box-shadow:0 0 0 3px rgba(45,212,191,.15)}
  .btn{width:100%;border-radius:16px;padding:.7rem 1rem;font-weight:700;border:0;cursor:pointer}
  .btn-primary{background:linear-gradient(90deg,#fb7185,#f59e0b,#22d3ee);color:#111}
  .muted-sm{color:#9ca3af;font-size:12px;text-align:center}
  .link{color:#e5e7eb;text-decoration:underline;text-underline-offset:3px}
  .banner{margin:8px 0 0;padding:10px 12px;border-radius:12px;font-size:13px;
          border:1px solid rgba(34,197,94,.35);background:rgba(34,197,94,.12);color:#d1fae5;text-align:center;display:none}
  .error{border-color:rgba(248,113,113,.35);background:rgba(248,113,113,.10);color:#fecaca}
</style>
</head>
<body>
  <main class="wrap">
    <div class="card">
      <h1>VibeScript Builder</h1>
      <p class="muted">Sign in with email/password or continue with Google.</p>

      <div id="banner" class="banner"></div>

      <form id="formSignIn" method="POST" action="/api/signin" class="space-y-3">
        <label for="email">Email</label>
        <input id="email" name="email" type="email" required autocomplete="email" placeholder="you@example.com"/>

        <label for="password">Password</label>
        <input id="password" name="password" type="password" required autocomplete="current-password" placeholder="••••••••"/>

        <button class="btn btn-primary" type="submit">Sign in</button>
      </form>

      <p class="muted-sm" style="margin-top:14px">
        New here? <a class="link" href="/signup">Create account</a>
      </p>

      <p class="muted-sm" style="margin-top:14px">
        By continuing you agree to our <a class="link" href="/terms.html">terms</a> and <a class="link" href="/privacy.html">privacy policy</a>.
      </p>
    </div>
  </main>

<script>
  // Persist email between attempts (helpful on mobile)
  const emailInput = document.getElementById('email');
  const last = sessionStorage.getItem('lastEmail') || '';
  if (last && !emailInput.value) emailInput.value = last;
  document.getElementById('formSignIn').addEventListener('submit', () => {
    sessionStorage.setItem('lastEmail', (emailInput.value || '').trim());
  });

  // Show server message if present (?msg=...)
  const params = new URLSearchParams(location.search);
  const msg = params.get('msg');
  if (msg) {
    const el = document.getElementById('banner');
    el.textContent = decodeURIComponent(msg);
    el.style.display = 'block';
  }
</script>
<script src="/scripts/footer-loader.js"></script>
</body>
</html>
