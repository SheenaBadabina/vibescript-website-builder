<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Edit • VibeScript</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root { --bg:#0b0d10; --fg:#e7f7ff; --muted:#9fb7c5; --brand:#20c0c8; }
    @media (prefers-color-scheme: light){ :root{ --bg:#fff; --fg:#0b0d10; --muted:#5a6b75; --brand:#0aa6ae; } }
    *{box-sizing:border-box} html,body{height:100%;margin:0}
    body{background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif;padding:16px}
    header{display:flex;align-items:center;justify-content:space-between;gap:8px}
    h1{margin:0;font-size:1.2rem}
    .row{display:grid;gap:12px;margin-top:16px}
    textarea{width:100%;min-height:160px;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.05);color:var(--fg)}
    .btn{padding:12px 14px;border:0;border-radius:12px;background:var(--brand);color:#002326;font-weight:700}
    .muted{color:var(--muted);font-size:.9rem}
    .card{padding:12px;border:1px solid rgba(255,255,255,.12);border-radius:16px;background:rgba(255,255,255,.04)}
    iframe{width:100%;height:55vh;border:1px solid rgba(255,255,255,.12);border-radius:12px;background:#fff}
  </style>
</head>
<body>
  <header>
    <h1>VibeScript Editor</h1>
    <nav><a class="btn" href="/dashboard">Back</a></nav>
  </header>

  <section class="row card">
    <div class="muted">Paste or tweak your HTML below. Preview updates live.</div>
    <textarea id="code" placeholder="<!doctype html> …"></textarea>
    <div class="row">
      <button id="previewBtn" class="btn" type="button">Preview</button>
      <a id="download" class="btn" href="#" download="index.html" style="display:none">Download</a>
    </div>
  </section>

  <section class="row">
    <div class="card">
      <div class="muted" style="margin-bottom:8px">Preview</div>
      <iframe id="preview"></iframe>
    </div>
  </section>

  <script>
    const code = document.getElementById('code');
    const iframe = document.getElementById('preview');
    const btn = document.getElementById('previewBtn');
    const dl = document.getElementById('download');

    btn.onclick = () => {
      const html = code.value || "<!doctype html><meta charset='utf-8'><title>Empty</title><h1 style='font-family:system-ui'>Empty</h1>";
      const blob = new Blob([html], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      iframe.src = url;
      dl.href = url;
      dl.style.display = 'inline-block';
    };
  </script>
</body>
</html>
